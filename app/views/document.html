<!--Screen for the adventure flow only when we have a new session-->
<div ng-if="isNewSession()" id="homeAdventurePane">
  <div class="separator"></div>
  <div id="homeWrapper" class="horz-centered">
    <h3>Lorry is a docker-compose.yml validator and composer.</h3>
    <div id="homeImportPane">
      <a class="button-primary" href="" ng-click="setNewSession(); triggerClickForElement('#importComposeBtn');">Import existing Compose YAML</a>
      <p>We'll validate your yml and then you can edit or add to it using our composer.</p>
    </div>
    <div id="homeScratchPane">
      <a class="button-primary" href="" ng-click="setNewSession();">Compose YAML from Scratch</a>
      <p>Build your docker-compose.yml file service by service.</p>
    </div>
  </div>
</div>

<!--Screen for the normal flow-->
<div ng-show="!isNewSession()" >
  <div id="documentActionsPane" ng-controller="DocumentImportCtrl">
    <div id="documentImportPane" ng-if="importable">
      <a id="importComposeBtn" class="button-primary" href="" ng-click="showImportDialog('compose')">Import Compose YAML</a>
      <a class="button-primary" href="" ng-click="showImportDialog('pmx')">Import PMX Template</a>
    </div>
    <div id="documentResetPane" ng-if="resettable">
      <a class="button-secondary" href="" ng-click="resetWorkspace()">Clear Workspace</a>
    </div>
    <document-alerts id="documentAlertsPane" ng-if="resettable"></document-alerts>
  </div>

  <div id="documentPane" ng-init="getValidKeys()">
    <div ng-repeat="serviceDefinition in serviceDefinitions">
      <service-definition-display ng-if="!yamlDocument.json[serviceName(serviceDefinition)].editMode"></service-definition-display>
      <service-definition-edit ng-if="yamlDocument.json[serviceName(serviceDefinition)].editMode" section-name="serviceName(serviceDefinition)"></service-definition-edit>
    </div>
    <div ng-if="!hasLoadFailure()">
      <div id="newServiceBlockBtn" ng-if="showAddServiceBlockOrBtn()">
        <a class="button-secondary" href="" ng-disabled="inEditMode()" ng-click="addNewServiceDef()">Add a New Service Block</a>
      </div>
      <div ng-if="!showAddServiceBlockOrBtn()">
        <service-definition-edit section-name=""></service-definition-edit>
      </div>
    </div>
  </div>

  <footer>
    <div id="documentExportPane" ng-controller="DocumentExportCtrl">
      <a href="" ng-class="exportButtonStyle()" ng-disabled="!exportable()" ng-click="saveDocument()">Export Compose YAML</a>
      <a href="" class="button-secondary" ng-disabled="!exportable()" ng-click="saveGist()">Save to Gist</a>
      <a href="" class="footer-link" ng-if="exportable()" clip-copy="doc" clip-click="confirmCopy()">{{copyText}}</a>
      <a href="" class="footer-link" ng-if="!exportable()" disabled="disabled">{{copyText}}</a>
    </div>
  </footer>
</div>
